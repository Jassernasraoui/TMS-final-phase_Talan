@startuml Logistics_Decisions

skinparam {
  BackgroundColor white
  ArrowColor #666666
  BorderColor #666666
  
  ActivityBackgroundColor #3498DB
  ActivityBorderColor #2874A6
  ActivityFontColor white
  ActivityFontStyle bold
  
  ActivityDiamondBackgroundColor #F9E79F
  ActivityDiamondBorderColor #F1C40F
  ActivityDiamondFontColor black
  ActivityDiamondFontStyle bold
  
  NoteBackgroundColor #E8F8F5
  NoteBorderColor #1ABC9C
  NoteFontColor #333333
}

title <b>DÉCISIONS CRITIQUES DU PROCESSUS LOGISTIQUE</b>

|Planification|
start
:Création d'une nouvelle tournée;

if (Date de tournée >= aujourd'hui?) then (Oui)
else (Non)
  :Correction de la date de tournée;
  note right: Date invalide
  -[#red]-> Retour
  detach
endif

:Assignation des ressources à la tournée;

if (Ressources disponibles?) then (Oui)
else (Non)
  :Recherche d'autres ressources;
  note right: Indisponibilité ressources
  -[#red]-> Retour à l'assignation
  detach
endif

if (Permis du chauffeur compatible avec véhicule?) then (Oui)
else (Non)
  :Réaffectation du chauffeur ou véhicule;
  note right: Incompatibilité permis
  -[#red]-> Retour à l'assignation
  detach
endif

:Ajout des livraisons planifiées;

if (Poids/volume <= capacité véhicule?) then (Oui)
else (Non)
  :Ajustement quantités ou changement de véhicule;
  note right: Dépassement capacité
  -[#red]-> Retour aux livraisons
  detach
endif

:Attribution des créneaux horaires;

if (Planning réalisable avec temps de trajet?) then (Oui)
else (Non)
  :Réajustement des créneaux;
  note right: Planning irréalisable
  -[#red]-> Retour aux créneaux
  detach
endif

|Préparation chargement|
:Création document préparation chargement;

:Génération des arrêts de livraison;

:Calcul des totaux de chargement;

if (Totaux respectent les limites du véhicule?) then (Oui)
else (Non)
  :Recalcul et ajustement des quantités;
  note right: Dépassement marges
  -[#red]-> Retour au calcul
  detach
endif

:Libération du document préparation;

:Validation par superviseur;

if (Document validé par superviseur?) then (Oui)
else (Non)
  :Correction des éléments signalés;
  note right: Validation refusée
  -[#red]-> Retour à la validation
  detach
endif

|Chargement véhicule|
:Création document chargement véhicule;

:Début processus chargement physique;

:Saisie des quantités réelles chargées;

if (Écarts quantités <= 10% ou justifiés?) then (Oui)
else (Non)
  :Compléter justifications des écarts;
  note right: Écarts non justifiés
  -[#red]-> Retour à la saisie
  detach
endif

:Finalisation du chargement;

if (Toutes lignes avec statut final?) then (Oui)
else (Non)
  :Compléter éléments manquants;
  note right: Finalisation incomplète
  -[#red]-> Retour à la finalisation
  detach
endif

|Exécution tournée|
:Départ en mission;

:Livraisons aux clients;

if (Anomalies de livraison?) then (Non)
else (Oui)
  :Documentation des anomalies;
  note right: Problèmes terrain
endif

:Clôture de la tournée;

if (Toutes livraisons effectuées/documentées?) then (Oui)
else (Non)
  :Traitement des exceptions;
  note right: Livraisons manquantes
  -[#red]-> Retour à la clôture
  detach
endif

:Libération des ressources;

stop

footer DÉCISIONS CRITIQUES PAR PHASE: Planification (6) | Préparation (3) | Chargement (3) | Exécution (2)

@enduml 